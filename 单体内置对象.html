<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>单体内置对象</title>
	<style type="text/css" media="screen">
  	body {
    	background-color: #242424;
    	color: #1E90FF; 
  	}
</style>
</head>
<body>
	<h3>单体内置对象</h3>
	<p>单体内置对象定义了两个：Global和Math</p>
	<h4>Global对象</h4>
	<p>URI编码方法: encodeURI()和encodeURIComponent()方法可以对URI进行编码，以便发送给浏览器。encodeURI()主要用于整个URI，而encodeURIComponent()主要对URI中的某一段进行编码。</p>
	<pre>
		<code>
			var url = "http://www.wrox.com/illegal value.html#start";
			
			document.write(encodeURI(url));

			document.write(encideURIComponent(url));
		</code>
	</pre>
	<p>与encodeURI()和encodeURIComponent()方法对应的方法分别是：decodeURI()和decodeURIComponent()，相对的decodeURI()只能对encodeURI()替换的字符进行解析。decodeURIComponent()只能对encodeURIComponent()的编码进行解析。</p>
	<pre>
		<code>
			var uri = "http%3A%2F%2Fwww.wrox.com%2Fillegal%20value.html%23start";

			document.write(decodeURI(uri));

			document.write(decodeURIComponent(uri));
		</code>
	</pre>
	<h4>eval()方法</h4>
	<p>eval()方法相当于解析器，只接受一个参数，返回既要执行的字符串。</p>
	<pre>
		<code>
			var msg = "hello world";
			eval("document.write(msg)");

			eval("function sayhi() {
					document.write("hi");
			}");
			sayhi();

			try  {
     			alert("Result:" + eval(prompt("Enter an expression:","")));
     		}

			catch(exception) {
     			alert(exception);
     		} //检测eval
		</code>
	</pre>
	<h4>window对象</h4>
	<p>在全局作用域中声明的所有变量和函数，成为了window对象的属性</p>
	<pre>
		<code>
			var color = "red";

			function sayColor() {
				alert("window.color");
			} 

			window.sayColor();

			var global = function(){
				return this;
			}();
		</code>
	</pre>
	<h3>Math对象</h3>
	<p>min()和max()方法</p>
	<pre>
		<code>
			var max = Math.max(3,54,32,16);
			document.write(max);

			var min = Math.min(3,54,32,16);
			document.write(min);

			var value = [1,2,3,4,5,6];
			var max_value = Math.max.apply(Math,value);
			document.write(max_value);
		</code>
	</pre>
	<p>舍入方法</p>
	<p>Math.ceil()执行向上舍入，即它总是将数值向上舍入为最接近的整数；Math.floor()执行向下舍入，即它总是将数值向下舍入为最接近的整数；Math.round()执行标准舍入，即它总是将数值四舍五入为最接近的整数。</p>
	<pre>
		<code>
			document.write(Math.ceil(25.9)); //26
			document.write(Math.ceil(25.5)); //26
			document.write(Math.ceil(25.1)); //26

			document.write(Math.floor(25.9)); //25
			document.write(Math.floor(25.5)); //25
			document.write(Math.floor(25.1)); //25

			document.write(Math.round(25.9)); //26
			document.write(Math.round(25.5)); //26
			document.write(Math.round(25.1)); //25
		</code>
	</pre>
	<p>random()</p>
	<p>random()返回一个0到1的随机数 值 = Math.floor(Math.random() * 可能值得总数 + 第一个可能的值) 最大值- 最小值 + 1 = 可能值</p>
	<pre>
		<code>
			var num = Math.floor(Math.random() * 10 + 1);
			document.write(num);

			function selecFrom(lowerValue, upperValue) {
				var choices = upperValue - lowerValue + 1;
				return Math.floor(Math.random() * choices + lowerValue);
			}
			document.write(selecFrom(2, 10));

			var colors = ["red", "blue", "yellow", "black", "green", "brown", "purple"];
			var color = colors[selecFrom(0, colors.length-1)];
			document.write(color);
		</code>
	</pre>
	<p>输出：</p>
	<script type="text/javascript">
		var url = "http://www.wrox.com/illegal value.html#start";
		
		document.write(encodeURI(url) + "<br>");

		document.write(encodeURIComponent(url) + "<br>");

		var uri = "http%3A%2F%2Fwww.wrox.com%2Fillegal%20value.html%23start";

		document.write(decodeURI(uri) + "<br>");

		document.write(decodeURIComponent(uri) + "<br>");
		
		var msg = "hello world";
		eval("document.write(msg)" + "\n");

		/*eval("function sayhi() {alert("hi");}");
		sayhi();*/

		try  {
     		alert("Result:" + eval(prompt("Enter an expression:","")));
     		}

		catch(exception) {
     		alert(exception);
     		}

     	var color = "red";

		function sayColor() {
			alert(window.color);
		} 

		window.sayColor();

		var global = function(){
			return this;
		}();

		var max = Math.max(3,54,32,16);
		document.write("<br>" + max + "\n");

		var min = Math.min(3,54,32,16);
		document.write(min + "<br>");

		var value = [1,2,3,4,5,6];
		var max_value = Math.max.apply(Math,value);
		document.write(max_value + "<br>");

		document.write(Math.ceil(25.9));
		document.write(Math.ceil(25.5));
		document.write(Math.ceil(25.1) + "<br>");

		document.write(Math.floor(25.9));
		document.write(Math.floor(25.5));
		document.write(Math.floor(25.1) + "<br>");

		document.write(Math.round(25.9));
		document.write(Math.round(25.5));
		document.write(Math.round(25.1) + "<br>");

		var num = Math.floor(Math.random() * 10 + 1);
		document.write(num + "<br>");

		function selecFrom(lowerValue, upperValue) {
			var choices = upperValue - lowerValue + 1;
			return Math.floor(Math.random() * choices + lowerValue);
		}
		document.write(selecFrom(2, 10) + "<br>");

		var colors = ["red", "blue", "yellow", "black", "green", "brown", "purple"];
		var color = colors[selecFrom(0, colors.length - 1)];
		document.write(color);
	</script>
</body>
</html>